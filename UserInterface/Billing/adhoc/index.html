<div data-ng-controller="adhocPayoutCtrl">
    <div data-ng-form="adhocPayoutform" class="form-horizontal">
        <div class="panel">
            <div class="panel-heading">
                <a>Adhoc-Payout Screen</a>
            </div>
            <!--Product and Stakeholder-->
            <div class="row-fluid" style="padding-top: 20px">
                <div class="control-group span4">
                    <label class="control-label">Product</label>
                    <div class="controls">
                        <select class="input-large" data-ng-model="selectedProduct" data-ng-change="changeProductCategory()" ui-select2 required>
                            <option value=""></option>
                            <option data-ng-repeat="c in productsList">{{c}}</option>
                        </select>
                    </div>
                </div>
                <div class="control-group span4">
                    <label class="control-label">Stakeholder Name</label>
                    <div class="controls">
                        <select class="input-large" data-ng-model="selectedStkholderId" ui-select2 data-ng-change="ShowData(selectedStkholderId)" required>
                            <option></option>
                            <optgroup label="Collector">
                                <option data-ng-repeat="c in stakeholderList | filter : {'Hierarchy.IsIndividual':'true'}" value="{{c.Id}}">{{c.Name}}</option>
                            </optgroup>
                            <optgroup label="Agency">
                                <option data-ng-repeat="c in stakeholderList | filter : {'Hierarchy.IsIndividual':'false'}" value="{{c.Id}}">{{c.Name}}</option>
                            </optgroup>
                        </select>
                    </div>
                </div>
                <div class="row-fluid text-center span2"  data-ng-show="selectedStkholderId">
                        <button class="btn btn-success " data-ng-click="OpenAdhocPayoutManager()">Add</button>
                </div>
            </div>
            <!--Table showing details-->
            <div class="row-fluid" style="width: 100%" data-ng-show="adhocPayoutList.length>0">
                <table class="table table-bordered" style="overflow: auto">
                    <thead>
                        <tr>
                            <th>Stakeholder Name</th>
                            <th>Total Amount</th>
                            <th>IsRecurring</th>
                            <th>IsPretax</th>
                            <th>Transaction Type</th>
                            <th>Reasons</th>
                            <th>Description</th>
                            <th>Start Month</th>
                            <th>End Month</th>
                            <th>Tenure</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr data-ng-repeat="adhocpayouts in adhocPayoutList">
                            <td>{{adhocpayouts.Stakeholder.Name}}</td>
                            <td>{{adhocpayouts.TotalAmount}}</td>
                            <!--IsRecurring-->
                            <td style="text-align: center">
                                <i data-ng-show="{{adhocpayouts.IsRecurring}}" class="btn btn-primary">Yes</i>
                                <i data-ng-hide="{{adhocpayouts.IsRecurring}}" class="btn ">No</i>
                            </td>
                            <td>{{adhocpayouts.IsPretax}}</td>
                            <!--IsCredit-->
                            <td style="text-align: center">
                                <i data-ng-show="{{adhocpayouts.IsCredit}}" class="btn btn-primary">Credit</i>
                                <i data-ng-hide="{{adhocpayouts.IsCredit}}" class="btn ">Debit</i>
                            </td>
                            <td>{{adhocpayouts.ReasonCode}}</td>
                            <td>{{adhocpayouts.Description}}</td>
                            <td>{{adhocpayouts.StartMonth}}</td>
                            <td>{{adhocpayouts.EndMonth}}</td>
                            <td>{{adhocpayouts.Tenure}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
            <!--ModalPopUp for payment Details -->
        <div modal="OpenAdhocPayout" options="modelOption">
            <div class="form-horizontal well">
                <div class="panel-heading">Payout Details</div>
                <div class="row-fluid">
                    <div class="control-group span5">
                        <label class="control-label">Total Amount</label>
                        <div class="controls">
                            <input type="text" data-ng-model="adhocPayout.TotalAmount" name="totalamount" data-ng-pattern="/^[0-9]+$/" required />
                            <!--Total Amount Validation-->
                            <div data-ng-show="adhocPayoutform.totalamount.$dirty && adhocPayoutform.totalamount.$invalid">
                                <div class="field-validation-error" data-ng-show="adhocPayoutform.totalamount.$error.required">{{val.Required()}}</div>
                                <div class="field-validation-error" data-ng-show="adhocPayoutform.totalamount.$error.pattern">{{val.OnlyNumbers()}}</div>
                            </div>
                        </div>
                    </div>
                    <div class="control-group span5">
                        <label class="control-label">Transcation Type</label>
                        <div class="controls">
                            <select class="input-large" data-ng-model="adhocPayout.IsCredit" name="TranscationType" ui-select2
                                    data-ng-change="SelectTransaction(adhocPayout.IsCredit)" required>
                                <option value=""></option>
                                <option data-ng-repeat="type in transcationtypes" value="{{type.value}}">{{type.display}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row-fluid">
                    <div class="control-group span5">
                        <label class="control-label">Tax</label>
                        <div class="controls">
                            <select class="input-large" data-ng-model="adhocPayout.IsPretax" ui-select2 required>
                                <option value=""></option>
                                <option data-ng-repeat="t in taxtype">{{t}}</option>
                            </select>
                        </div>
                    </div>
                    <div class="control-group span5">
                        <label class="control-label">Reasons</label>
                        <div class="controls">
                            <select class="input-large" data-ng-model="adhocPayout.ReasonCode" ui-select2 required>
                                <option value=""></option>
                                <option data-ng-repeat="reason in selecttransdata">{{reason.display}}</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="row-fluid">
                    <div class="control-group">
                        <label class="control-label">Description</label>
                        <div class="controls">
                            <textarea class="resize" type="text" data-ng-model="adhocPayout.Description" style="width: 690px" required></textarea>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-horizontal well">
                <div class="panel-heading">Policy</div>
                <div class="row-fluid">
                    <div class="control-group span6">
                        <div class="controls">
                            <input type="radio" data-ng-model="adhocPayout.IsRecurring" value="false"><label>One Time</label>
                            <input type="radio" data-ng-model="adhocPayout.IsRecurring" value="true"><label>Recurring</label>
                        </div>
                    </div>
                </div>
                <div class="form-horizontal" data-ng-show="adhocPayout.IsRecurring=='true'">
                    <div class="row-fluid">
                        <div class="control-group span5">
                            <label class="control-label">Start Month</label>
                            <div class="controls">
                                <div class="input-append">
                                    <input class="input-medium" type="text" name="StartMonth" data-ng-model="adhocPayout.StartMonth" required
                                           data-date-days-of-week-disabled="'0'" data-date-min-view-mode="1" data-date-format="yyyy-MM-dd"
                                           data-bs-datepicker="" />
                                    <button type="button" class="btn" data-toggle="datepicker"><i class="icon-calendar"></i></button>
                                </div>
                                <!--StartDate validation-->
                                <div data-ng-show="adhocPayoutform.StartMonth.$dirty">
                                    <div class="field-validation-error" data-ng-show="adhocPayoutform.StartMonth.$error.required">{{val.Required()}}</div>
                                </div>
                            </div>
                        </div>

                        <div class="control-group span5">
                            <label class="control-label">Tenure</label>
                            <div class="controls">
                                <input type="number" min="1" max="12" data-ng-model="adhocPayout.Tenure" name="Tenure" data-ng-pattern="/^[0-9]+$/" required />
                                <!--Total Amount Validation-->
                                <div data-ng-show="adhocPayoutform.Tenure.$dirty && adhocPayoutform.Tenure.$invalid">
                                    <div class="field-validation-error" data-ng-show="adhocPayoutform.Tenure.$error.required">{{val.Required()}}</div>
                                    <div class="field-validation-error" data-ng-show="adhocPayoutform.Tenure.$error.pattern">{{val.OnlyNumbers()}}</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="control-group text-right">
                <div class="controls">
                    <button class="btn btn-success" data-ng-disabled="!(adhocPayoutform.$valid)" data-ng-click="SaveData(adhocPayout);OpenAdhocPayout=false">Approve</button>
                    <button class="btn btn-warning" data-ng-click="CloseAdhocPayoutManager()">Close</button>
                    <button class="btn btn-info" data-ng-click="resetadhocPayout(adhocPayout.Products)">Reset</button>
                </div>
            </div>
        </div>
    </div>
</div>


