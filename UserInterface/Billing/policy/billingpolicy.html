<div>
    <div data-ng-form="payoutPolicyForm" class="form-horizontal">
        <div class="row well-small">
            <div class="control-group span5">
                <label class="control-label">Product</label>
                <div class="controls">
                    <select class="input-large" data-ng-model="dldata.payoutPolicy.Products"
                            data-ng-change="datalayer.changeProductCategory()" ui-select2 required>
                        <option value=""></option>
                        <option data-ng-repeat="c in dldata.productsList">{{c}}</option>
                    </select>
                </div>
            </div>
            <div class="control-group span6">
                <label class="control-label">Category</label>
                <div class="controls">
                    <csswitch ngbind="dldata.payoutPolicy.Category"
                              onbtnclick="datalayer.changeProductCategory()"
                              namevalues="dldata.categorySwitch"></csswitch>
                </div>
            </div>
        </div>
       <!-- <div class="row">
            <div class="control-group span6">
                <label class="control-label">Description</label>
                <div class="controls">
                    <textarea data-ng-modal="dldata.payoutPolicy.Description"></textarea>
                </div>
            </div>
        </div>-->
        <div class="row" data-ng-show="false">
            <div class="control-group span5">
                <label class="control-label">Name</label>
                <div class="controls">
                    <input type="text" data-ng-model="dldata.payoutPolicy.Name"
                           data-ng-pattern="/^\w*$/" readonly="readonly" required />
                </div>
            </div>
        </div>
    </div>

    <tabset>
        <!--Approved Subpolicy-->
        <tab heading="Approved Subpolicy ( {{(dldata.payoutPolicy.BillingRelations | filter:factory.filterRelation(true,'Approved')).length}} )" class="alert-success">
            <table class="table table-bordered form-horizontal" style="border-color: green">
                <tr data-ng-repeat="payoutRelation in dldata.payoutPolicy.BillingRelations | filter:factory.filterRelation(true,'Approved') | orderBy: 'Priority'">
                    <td style="border-color: green">
                        <div data-ng-init="disSubPolicy = factory.getDisplaySubPolicy(payoutRelation.BillingSubpolicy)" class="span9">
                            <!--Name-->
                            <div class="row-fluid">
                                <div class="control-group span5">
                                    <label class="control-label">Name</label>
                                    <div class="controls">
                                        <input type="text" data-ng-model="payoutRelation.BillingSubpolicy.Name" readonly="readonly" />
                                    </div>
                                </div>
                            </div>
                            <!--Output & Condition-->
                            <div class="row-fluid">
                                <!--Output-->
                                <div class="control-group span5">
                                    <label class="control-label">Output</label>
                                    <div class="controls">
                                        <textarea class="resize" data-ng-model="disSubPolicy.Output" cols="25" readonly="readonly"></textarea>
                                    </div>
                                </div>
                                <!--condition-->
                                <div class="control-group span6">
                                    <label class="control-label">Condition</label>
                                    <div class="controls">
                                        <textarea class="resize" data-ng-model="disSubPolicy.Condition" cols="25" readonly="readonly"></textarea>
                                    </div>
                                </div>
                            </div>
                            <!--StartDate & EndDate-->
                            <div class="row-fluid">
                                <div class="control-group span5">
                                    <label class="control-label">Start Date</label>
                                    <div class="controls">
                                        <input type="text" readonly value="{{payoutRelation.StartDate|date:'dd-MM-yyyy'}}">
                                    </div>
                                </div>
                                <!--Enddate-->
                                <div class="control-group span6">
                                    <label class="control-label">End Date</label>
                                    <div class="controls">
                                        <input type="text" readonly value="{{payoutRelation.EndDate|date:'dd-MM-yyyy'}}">
                                    </div>
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="control-group span4">
                                    <div class="controls btn-group">
                                        <button class="btn btn-danger" data-ng-show="payoutRelation.Status=='Approved'"
                                                data-ng-click="openModelDeactivateSubPolicy(payoutRelation)">
                                            Deactivate
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="span2">
                            <div class="row-fluid span2">
                                <div class="row-fluid">
                                    <div class="btn-group btn-group-vertical">
                                        <button class="btn btn-mini icon-arrow-up"
                                                data-ng-disabled="$first"
                                                data-ng-click="factory.upside(dldata.subPolicy,$index)"></button>
                                        <button class="btn btn-mini icon-arrow-down"
                                                data-ng-disabled="$last"
                                                data-ng-click="factory.downside(dldata.subPolicy,$index)"></button>
                                    </div>
                                </div>
                            </div>
                            <!--Status Div-->
                            <div class="row-fluid span2">
                                <div class="row-fluid">
                                    <div class="row-fluid text-left">
                                        <label ng-style="dldata.color">Status : {{factory.setStatus(payoutRelation.Status)}}</label>
                                    </div>
                                </div>
                                <!--CreatedBy-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color:blue">CreatedBy : {{factory.setStatus(payoutRelation.CreatedBy)}}</label>
                                    </div>
                                </div>
                                <!--CreatedDate-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color:blue">CreatedDate : {{factory.setStatus(payoutRelation.CreatedOn) | date : 'dd-MM-yyyy'}}</label>
                                    </div>
                                </div>

                                <!--ApprovedBy-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color:blue">ApprovedBy : {{factory.setStatus(payoutRelation.ApprovedBy)}}</label>
                                    </div>
                                </div>
                                <!--ApprovedDate-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color:blue">ApprovedDate : {{factory.setStatus(payoutRelation.ApprovedOn) | date : 'dd-MM-yyyy'}}</label>
                                    </div>
                                </div>
                                <!--EffectiveFrom-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color:blue">EffectiveFrom : {{factory.setStatus(payoutRelation.StartDate) | date : 'dd-MM-yyyy'}}</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </tab>
        <!--UnApproved Subpolicy-->
        <tab heading="UnApproved Subpolicy ( {{(dldata.payoutPolicy.BillingRelations | filter:factory.filterRelation(true,'Submitted')).length}} )" class="alert-success">
            <table class="table table-bordered form-horizontal" style="border-color: green">
                <tr data-ng-repeat="payoutRelation in dldata.payoutPolicy.BillingRelations | filter:factory.filterRelation(true,'Submitted') | orderBy: 'Priority'">
                    <td style="border-color: green">
                        <div data-ng-init="disSubPolicy = factory.getDisplaySubPolicy(payoutRelation.BillingSubpolicy)" class="span9">
                            <!--Name-->
                            <div class="row-fluid">
                                <div class="control-group span5">
                                    <label class="control-label">Name</label>
                                    <div class="controls">
                                        <input type="text" data-ng-model="payoutRelation.BillingSubpolicy.Name" readonly="readonly" />
                                    </div>
                                </div>
                            </div>
                            <!--Output & Condition-->
                            <div class="row-fluid">
                                <!--Output-->
                                <div class="control-group span5">
                                    <label class="control-label">Output</label>
                                    <div class="controls">
                                        <textarea class="resize" data-ng-model="disSubPolicy.Output" cols="25" readonly="readonly"></textarea>
                                    </div>
                                </div>
                                <!--condition-->
                                <div class="control-group span6">
                                    <label class="control-label">Condition</label>
                                    <div class="controls">
                                        <textarea class="resize" data-ng-model="disSubPolicy.Condition" cols="25" readonly="readonly"></textarea>
                                    </div>
                                </div>
                            </div>
                            <!--StartDate & EndDate-->
                            <div class="row-fluid">
                                <div class="control-group span5">
                                    <label class="control-label">Start Date</label>
                                    <div class="controls">
                                        <input type="text" readonly value="{{payoutRelation.StartDate|date:'dd-MM-yyyy'}}">
                                    </div>
                                </div>
                                <!--Enddate-->
                                <div class="control-group span6">
                                    <label class="control-label">End Date</label>
                                    <div class="controls">
                                        <input type="text" readonly value="{{payoutRelation.EndDate|date:'dd-MM-yyyy'}}">
                                    </div>
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="control-group span4">
                                    <div class="controls btn-group">
                                        <button class="btn btn-success" data-ng-show="payoutRelation.Status=='Submitted'"
                                                data-ng-click="payoutRelation.Status='Approved';datalayer.approveRelation(payoutRelation)">
                                            Approve
                                        </button>
                                        <button class="btn btn-success" data-ng-show="payoutRelation.Status=='Submitted'"
                                                data-ng-click="payoutRelation.Status='Rejected';datalayer.RejectSubPolicy(payoutRelation)">
                                            Reject
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="span2">
                            <div class="row-fluid span2">
                                <div class="row-fluid text-right" style="float: left;">
                                    <div class="btn-group btn-group-vertical">
                                        <button class="btn btn-mini icon-arrow-up" data-ng-disabled="$first"
                                                data-ng-click="factory.upside(dldata.subPolicy,$index)"></button>
                                        <button class="btn btn-mini icon-arrow-down" data-ng-disabled="$last"
                                                data-ng-click="factory.downside(dldata.subPolicy,$index)"></button>
                                    </div>

                                </div>
                            </div>
                            <!--Status Div-->
                            <div class="row-fluid span2">
                                <div class="row-fluid">
                                    <div class="row-fluid text-left">
                                        <label ng-style="dldata.color">Status : {{factory.setStatus(payoutRelation.Status)}}</label>
                                    </div>
                                </div>
                                <!--CreatedBy-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color:blue">CreatedBy : {{factory.setStatus(payoutRelation.CreatedBy)}}</label>
                                    </div>
                                </div>
                                <!--CreatedDate-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color:blue">CreatedDate : {{factory.setStatus(payoutRelation.CreatedOn) | date : 'dd-MM-yyyy'}}</label>
                                    </div>
                                </div>

                                <!--ApprovedBy-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color:blue">ApprovedBy : {{factory.setStatus(payoutRelation.ApprovedBy)}}</label>
                                    </div>
                                </div>
                                <!--ApprovedDate-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color:blue">ApprovedDate : {{factory.setStatus(payoutRelation.ApprovedOn) | date : 'dd-MM-yyyy'}}</label>
                                    </div>
                                </div>
                                <!--EffectiveFrom-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color:blue">EffectiveFrom : {{factory.setStatus(payoutRelation.StartDate) | date : 'dd-MM-yyyy'}}</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </tab>
        <!--Expired Subpolicy-->
        <tab heading="Expired Subpolicy ( {{(dldata.payoutPolicy.BillingRelations | filter:factory.filterRelation(false,'')).length}} )" class="alert-error">
            <table class="table table-bordered form-horizontal" style="border-color: red">
                <tr data-ng-repeat="billingRelation in dldata.payoutPolicy.BillingRelations | filter:factory.filterRelation(false,'')">
                    <td style="border-color: red">
                        <div data-ng-init="disSubPolicy = facatory.getDisplaySubPolicy(billingRelation.BillingSubpolicy)" class="span9">
                            <div class="row-fluid">
                                <div class="control-group span5">
                                    <label class="control-label">Name</label>
                                    <div class="controls">
                                        <input type="text" data-ng-model="billingRelation.BillingSubpolicy.Name" readonly="readonly" />
                                    </div>
                                </div>
                            </div>
                            <!--Output & Condition-->
                            <div class="row-fluid">
                                <!--Output-->
                                <div class="control-group span5">
                                    <label class="control-label">Output</label>
                                    <div class="controls">
                                        <textarea class="resize" data-ng-model="disSubPolicy.Output" cols="25" readonly="readonly"></textarea>
                                    </div>
                                </div>
                                <!--Condition-->
                                <div class="control-group span6">
                                    <label class="control-label">Condition</label>
                                    <div class="controls">
                                        <textarea class="resize" data-ng-model="disSubPolicy.Condition" cols="25" readonly="readonly"></textarea>
                                    </div>
                                </div>
                            </div>
                            <!--StartDate & EndDate-->
                            <div class="row-fluid">
                                <div class="control-group span5">
                                    <label class="control-label">Start Date</label>
                                    <div class="controls">
                                        <input type="text" readonly value="{{billingRelation.StartDate|date:'dd-MM-yyyy'}}">
                                    </div>
                                </div>
                                <div class="control-group span6">
                                    <label class="control-label">End Date</label>
                                    <div class="controls">
                                        <input type="text" readonly value="{{billingRelation.EndDate|date:'dd-MM-yyyy'}}">
                                    </div>
                                </div>
                            </div>

                            <!--Button-->
                            <div class="row-fluid">
                                <div class="control-group span4">
                                    <div class="controls btn-group">
                                        <button class="btn btn-primary" data-ng-click="openModel(billingRelation,true)">ReActivate</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="span2">
                            <div class="row-fluid span2">
                                <div class="row-fluid text-right" style="float: left;">
                                    <div class="btn-group btn-group-vertical">
                                        <button class="btn btn-mini icon-arrow-up" data-ng-disabled="$first"
                                                data-ng-click="factory.upside(dldata.subPolicy,$index)"></button>
                                        <button class="btn btn-mini icon-arrow-down"
                                                data-ng-disabled="$last"
                                                data-ng-click="factory.downside(dldata.subPolicy,$index)"></button>
                                    </div>
                                </div>
                            </div>
                            <!--Status Div-->
                            <div class="row-fluid span2">
                                <div class="row-fluid">
                                    <div class="row-fluid text-left">
                                        <label ng-style="dldata.color">Status : {{factory.setStatus(billingRelation.Status)}}</label>
                                    </div>
                                </div>
                                <!--CreatedBy-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color: red">CreatedBy : {{factory.setStatus(billingRelation.CreatedBy)}}</label>
                                    </div>
                                </div>
                                <!--CreatedDate-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color: red">CreatedDate : {{factory.setStatus(billingRelation.CreatedOn) | date : 'dd-MM-yyyy'}}</label>
                                    </div>
                                </div>

                                <!--ApprovedBy-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color: red">ApprovedBy : {{factory.setStatus(billingRelation.ApprovedBy)}}</label>
                                    </div>
                                </div>
                                <!--ApprovedDate-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color: red">ApprovedDate : {{factory.setStatus(billingRelation.ApprovedOn) | date : 'dd-MM-yyyy'}}</label>
                                    </div>
                                </div>
                                <!--EffectiveFrom-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color: red">EffectiveFrom : {{factory.setStatus(billingRelation.StartDate) | date : 'dd-MM-yyyy'}}</label>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </td>
                </tr>
            </table>
        </tab>
        <!--Draft SubPolicy-->
        <tab heading="Draft SubPolicy ( {{dldata.subPolicyList.length}} )" class="alert-info">
            <table class="table table-bordered form-horizontal" style="border-color: blue">
                <tr data-ng-repeat="subPolicy in dldata.subPolicyList">
                    <td style="border-color: blue">
                        <div data-ng-init="disSubPolicy = factory.getDisplaySubPolicy(subPolicy)" class="span9">
                            <div class="row">
                                <div class="control-group span5">
                                    <label class="control-label">Name</label>
                                    <div class="controls">
                                        <input type="text" data-ng-model="subPolicy.Name" readonly="readonly" />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <div class="control-group span5">
                                    <label class="control-label">Output</label>
                                    <div class="controls">
                                        <textarea data-ng-model="disSubPolicy.Output" cols="25" readonly="readonly"></textarea>
                                    </div>
                                </div>

                                <div class="control-group span6">
                                    <label class="control-label">Condition</label>
                                    <div class="controls">
                                        <textarea data-ng-model="disSubPolicy.Condition" cols="25" readonly="readonly"></textarea>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="span2">
                            <div class="btn-group">
                                <button class="btn btn-primary"
                                        data-ng-click="openModelNewSubPolicy(subPolicy,$index)">
                                    Activate
                                </button>
                            </div>
                        </div>

                    </td>
                </tr>
            </table>
        </tab>
    </tabset>
</div>



