<div data-ng-form="payoutTwoPolicyForm">
    <div class="row">
        <cs-form layout="3.4.8">
            <cs-field data-ng-model="billingpolicy.Products" data-ng-change="onParamChange('product')"
                      field="BillingPolicyModel.Products"></cs-field>

            <cs-field data-ng-show="billingpolicy.Products" data-ng-model="billingpolicy.PolicyType"
                      data-ng-change="onParamChange('policy')" field="BillingPolicyModel.PolicyType"></cs-field>

            <cs-field data-ng-show="billingpolicy.Products" data-ng-model="billingpolicy.PolicyFor"
                      field="BillingPolicyModel.PolicyFor" data-ng-change="getStakeholderOrHierarchy(billingpolicy.PolicyFor)"></cs-field>

            <div data-ng-if="billingpolicy.PolicyFor == 'Stakeholder' && billingpolicy.Products">
                <cs-field data-ng-model="billingpolicy.PolicyForId" data-ng-change="getSubpolicyList(billingpolicy.Products)"
                          field="BillingPolicyModel.PolicyForStatkeholder" value-list="policyForList"></cs-field>
            </div>
            <div data-ng-if="billingpolicy.PolicyFor == 'Hierarchy' && billingpolicy.Products">
                <cs-field data-ng-model="billingpolicy.PolicyForId" data-ng-change="getSubpolicyList(billingpolicy.Products)"
                          field="BillingPolicyModel.PolicyForHierarchy" value-list="policyForList"></cs-field>
            </div>

            <div data-ng-if="billingpolicy.PolicyFor == 'Product'" data-ng-init="billingpolicy.PolicyForId = billingpolicy.Products">
                <cs-field data-ng-model="billingpolicy.PolicyForId"
                          field="BillingPolicyModel.PolicyForProduct" data-ng-disabled="true" data-ng-change="getSubpolicyList(billingpolicy.Products)"></cs-field>
            </div>
        </cs-form>
    </div>

    <div class="col-md-9" data-ng-show=" billingpolicy.PolicyForId">
        <cs-dual-list config="config" selected="selected"
                      on-click="displaySubpolicyDetails(selected)"
                      on-move="moveSubpolicy()"></cs-dual-list>
    </div>

    <div class="row" data-ng-form="policyForm" data-ng-show="buttonStatus!==''">
        <div class="col-md-offset-1 col-md-9">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <div class="row">
                        <b class="col-md-2">{{selected.selectedItem.Name}} :({{buttonStatus}})</b>
                        <div class="pull-right" style="margin-right: 5px">

                            <cs-button type="delete" text="Deactivate"
                                       data-ng-show="buttonStatus=='Approved'"
                                       data-ng-click="openModelforSubPolicy('Deactivate',selected);"></cs-button>
                            <cs-button type="save" text="Activate"
                                       data-ng-show="buttonStatus=='Draft'"
                                       data-ng-click="openModelforSubPolicy('Activate',selected);"></cs-button>

                            <cs-button type="add" text="Reactivate"
                                       data-ng-show="buttonStatus=='Expired'"
                                       data-ng-click="openModelforSubPolicy('Reactivate',selected);">
                            </cs-button>

                            <cs-button type="save" text="Approve"
                                       data-ng-show="buttonStatus=='UnApproved'"
                                       data-ng-click="approveORreject('Approve',subpolicy.BillingRelations[0])">
                            </cs-button>

                            <cs-button type="save" text="Reject"
                                       data-ng-show="buttonStatus=='UnApproved'"
                                       data-ng-click="approveORreject('Reject',subpolicy.BillingRelations[0])">
                            </cs-button>
                        </div>
                    </div>
                </div>
                <div class="panel-body">
                    <cs-forKDm layout="6.4.6">
                        <cs-field field="BillingPolicyModel.Name" ng-model="selected.selectedItem.Name" ng-disabled="true"></cs-field>
                        <div data-ng-show="buttonStatus!=='Draft'">
                            <cs-field field="BillingPolicyModel.startDateText" ng-disabled="true" ng-model="selected.selectedItem.BillingRelations[0].StartDate"></cs-field>
                            <cs-field field="BillingPolicyModel.endDateText" ng-disabled="true" ng-model="selected.selectedItem.BillingRelations[0].EndDate"></cs-field>
                        </div>
                        <div class="row">
                            <cs-output table-name="BillingSubpolicy"
                                       tokens-list="displaySubPolicy.outputTokens"></cs-output>
                        </div>
                        <div class="row">
                            <cs-condition table-name="BillingSubpolicy"
                                          tokens-list="displaySubPolicy.conditionTokens"></cs-condition>
                        </div>
                    </cs-forKDm>
                </div>
            </div>
        </div>
    </div>
</div>
