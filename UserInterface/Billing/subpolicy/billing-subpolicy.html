<div data-ng-form="subpolicyForm">
    <div class="form-horizontal">
        <cs-form layout="4.4.8">
            <cs-field data-ng-model="sele.Products"
                      data-ng-change="getSubpolicyList(sele)"
                      field="payoutSubpolicy.Products" ng-required="true"></cs-field>
            
            <cs-field data-ng-if="sele.Products" data-ng-model="sele.PolicyType"
                      data-ng-change="getSubpolicyList(sele)"
                      field="payoutSubpolicy.PolicyType">
            </cs-field>

            <cs-button type="add" text="Add Subpolicy" data-ng-show="sele.PolicyType" 
                       data-ng-click="addSubPolicy(sele,subpolicyForm)">
            </cs-button>
        </cs-form>
    </div>

    <div>
        <div class="col-md-3" data-ng-show="sele.Products">
            <cs-list list-heading="Subpolicy List" value-list="subpolicyList" text-field="Name"
                data-ng-model="spayoutSubpolicy" data-ng-click="selectSubpolicy(spayoutSubpolicy)"></cs-list>
        </div>

        <div class="col-md-9" data-ng-if="showDiv">
            <!--Subpolicy-->
            <div id="subpolicy-display" data-ng-form="payoutSubpolicyForm">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        Subpolicy
                    </div>
                    <div class="panel-body">
                        <cs-form layout="7.3.7">
                            <cs-field data-ng-model="subpolicy.Products"
                                      field="payoutSubpolicy.Productname"
                                      data-ng-disabled="true"></cs-field>

                             <cs-field data-ng-model="subpolicy.PolicyType"
                                      field="payoutSubpolicy.PolicyTypeText"
                                      data-ng-disabled="true"></cs-field>
                            <!--Name and Description-->

                            <cs-field data-ng-model="subpolicy.Name"
                                      ng-required="true"
                                      field="payoutSubpolicy.Name"
                                      data-ng-disabled="subpolicy.Id"></cs-field>
                            <!--<label class="text-danger" data-ng-show="dldata.isDuplicateName">
                                    Subpolicy name already exist
                                </label>-->
                            <cs-field data-ng-model="subpolicy.Description"
                                      field="payoutSubpolicy.Description"></cs-field>
                        </cs-form>
                    </div>
                </div>
            </div>

            <!--Conditions-->
            <div id="subpolicy-conditions">
                <cs-condition table-name="CustomerInfo"
                              selected="selParams"
                              formula-list="formulaList"
                              tokens-list="selectedTokens.conditionTokens"
                              group-id="0.Condition"
                              group-type="Condition"
                              debug="true"></cs-condition>
            </div>

            <!--Output -->
            <div id="subpolicy-output">
                <cs-output table-name="CustomerInfo"
                           selected="selParams"
                           formula-list="formulaList"
                           matrix-list="matrixList"
                           tokens-list="selectedTokens.ifOutputTokens"
                           group-type="Output"
                           group-id="1.Output"></cs-output>
            </div>

            <!--Restriction-->
            <div class="panel panel-default">
                <div class="panel-heading">Restriction</div>
                <div class="panel-body">
                    <div class="row" style="margin-bottom: 5px">
                        <div class="col-md-5">
                            <input type="text" class="form-control" data-ng-disabled="true" value="Processing Fee" />
                        </div>
                        <div class="col-md-5">
                            <div class="col-md-4 control-label">Formula</div>
                            <div class="col-md-8">
                                <select data-ui-select2=""
                                    class="input-xlarge"
                                    data-ng-model="subpolicy.ProcessingFee">
                                    <option data-ng-repeat="formula in formulaList track by formula.Id" value="{{formula.Id}}">{{formula.Name}}</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-5">
                            <input type="text" class="form-control" data-ng-disabled="true" value="Payout Capping" />
                        </div>
                        <div class="col-md-5">
                            <div class="col-md-4 control-label">Formula</div>
                            <div class="col-md-8">
                                <select data-ui-select2=""
                                    class="input-xlarge"
                                    data-ng-model="subpolicy.PayoutCapping">
                                    <option data-ng-repeat="formula in formulaList track by formula.Id" value="{{formula.Id}}">{{formula.Name}}</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <!--Button-->
            <div class="row text-right" id="subpolicy-buttons">
                <cs-button type="save"
                    data-ng-disabled="payoutSubpolicyForm.$invalid "
                    data-ng-click="saveSubPolicy(subpolicy,selectedTokens)">
                </cs-button>

                <cs-button type="reset"
                    data-ng-click="resetSubPolicy(sele.Products,subpolicyForm)"></cs-button>
            </div>
        </div>
    </div>
</div>




<!-- <div class="form-group col-md-6">
         <label class="control-label">Category</label>
         <div class="controls">
             <csswitch ngdisabled="dldata.payoutSubpolicy.Id"
                       ngbind="dldata.payoutSubpolicy.Category"
                       onbtnclick="datalayer.changeProductCategory()"
                       namevalues="dldata.categorySwitch"></csswitch>
         </div>
     </div>-->

<!--<div class="box-sub">
                    <div class="box-heading">Subpolicy list</div>
                    <div class="box-body">
                        <div class="sub-name"
                             data-ng-repeat="spayoutSubpolicy in subpolicyList | orderBy : 'Name'">
                            <a class="btn-link"
                               data-ng-click="selectSubpolicy(spayoutSubpolicy)">{{spayoutSubpolicy.Name}}</a>
                        </div>
                    </div>
                </div>-->
