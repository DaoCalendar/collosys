<div class="form-horizontal" data-ng-form="frmPermission">
    <div class="panel">
        <div class="panel-heading">Permissions</div>
        <cs-form layout="6.3.7">
            <cs-field data-ng-model="perm.hierarchy"
                      field="Permission.Hierarchy" value-list="dldata.stakeHierarchy|unique : 'Hierarchy'"></cs-field>
            
            <div data-ng-show="perm.hierarchy">
                <cs-field data-ng-model="perm.designation"
                          field="Permission.Designation" value-list="dldata.stakeHierarchy|
                        filter : {'Hierarchy' : perm.hierarchy} | orderBy: 'PositionLevel'" data-ng-change="datalayer.GetPermission(perm.designation)"></cs-field>
            </div>
        </cs-form>
    </div>

    <div data-ng-show="perm.designation">
        <div data-ng-repeat="(key, module) in dldata.permission track by key">
            <div class="panel">
                <div class="panel-heading">
                    {{module.name}}
                </div>
                <div>
                    <input type="checkbox" data-ng-checked="ticks(module)" data-ng-model="selAll" data-ng-click="selectAll(selAll,module)" /><label>Select All</label>
                </div>
                <div data-ng-repeat="(key,activity) in module.childrens track by key">

                    <div class="col-md-5">
                        <input type="checkbox" data-ng-model="activity.access" data-ng-click="uncheckChildren(activity)" />{{activity.name}}
                        <div><sub>{{activity.description}}</sub></div>
                    </div>

                    <div data-ng-if="activity.access" data-ng-repeat="(key,permissions) in activity.childrens track by key">

                        <div class="col-md-5">
                            <input type="checkbox" data-ng-model="permissions.access" data-ng-click="uncheckChildren(permissions)" />{{permissions.name}}
                            <div><sub>{{permissions.description}}</sub></div>
                        </div>

                        <div data-ng-repeat="(key,extraPermissions) in permissions.childrens track by key">
                            <div class="col-md-5">
                                <input type="checkbox" data-ng-model="extraPermissions.access" data-ng-click="uncheckChildren(extraPermissions)" />{{extraPermissions.name}}
                                <div><sub>{{extraPermissions.description}}</sub></div>
                            </div>
                        </div>

                    </div>

                </div>
            </div>
        </div>
        <div class="text-right">
            <button data-ng-click="datalayer.saveNew(dldata.permission)" class="btn btn-success ">Save</button>
        </div>
    </div>
</div>



<!--<div data-ng-show="perm.designation">
            <div data-ng-repeat="data in dldata.permission">
                <div class="panel row">
                    <div class="panel-heading">
                        <input type="checkbox" data-ng-model="data.access" />{{data.area}}</div>
                    <div data-ng-repeat="perm in data.permissions" class="panel-body" data-ng-if="data.access">
                        <div class="col-md-5">
                            <input data-ng-model="perm.permission.access" data-ng-click="uncheckExtraPerm(perm.permission.access,perm.extrapermission)" type="checkbox">
                            {{perm.permission.display}}
                            <div>
                                <p><sub>{{perm.permission.desc}}</sub></p>
                            </div>
                        </div>
                        <div data-ng-show="perm.permission.access" data-ng-repeat="dt in perm.extrapermission">
                            <div class="col-md-5">
                                <input data-ng-model="dt.access" type="checkbox">
                                {{dt.display}}
                                <div>
                                    <p><sub>{{dt.desc}}</sub></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="text-right">
                <button data-ng-click="datalayer.saveNew(dldata.permission)" class="btn btn-success ">Save</button>
            </div>
        </div>-->
