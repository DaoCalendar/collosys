<div>
    <div data-ng-form="allocPolicyForm" class="form-horizontal">
        <div class="row well-small2">
            <div class="control-group span5">
                <label class="control-label">Product</label>
                <div class="controls">
                    <select class="input-large" data-ng-model="dldata.allocPolicy.Products"
                            data-ng-change="datalayer.changeProductCategory()"
                            data-ui-select2=""
                            required>
                        <option value=""></option>
                        <option data-ng-repeat="c in dldata.productsList">{{c}}</option>
                    </select>
                </div>
            </div>
        </div>
    </div>

    <tabset>
        <!--Approved Subpolicy-->
        <tab heading="Approved Subpolicy ( {{(dldata.allocPolicy.AllocRelations | filter:filterRelation(true,'Approved')).length}} )" class="alert-success">
            <table class="table table-bordered form-horizontal" style="border-color: green">
                <tr data-ng-repeat="allocRelation in dldata.allocPolicy.AllocRelations | filter:factory.filterRelation(true,'Approved') | orderBy: 'Priority'">
                    <td style="border-color: green">
                        <div data-ng-init="disSubPolicy = factory.getDisplaySubPolicy(allocRelation.AllocSubpolicy)" class=" row-fluid span12">
                            <div class="row-fluid span9">
                                <!--Name & Policy-->
                                <div class="row-fluid">
                                    <!--Name-->
                                    <div class="control-group span5">
                                        <label class="control-label">Name</label>
                                        <div class="controls">
                                            <input type="text" data-ng-model="allocRelation.AllocSubpolicy.Name" readonly="readonly" />
                                        </div>
                                    </div>

                                </div>
                                <!--Conditions & Policy Reason/ Stakeholder-->
                                <div class="row-fluid">
                                    <!--Policy-->
                                    <div class="control-group span5">
                                        <label class="control-label">Policy</label>
                                        <div class="controls">
                                            <input type="text" data-ng-model="disSubPolicy.Policy" readonly="readonly" />
                                        </div>
                                    </div>
                                    <!--POlicy Reason-->
                                    <div class="control-group span5" data-ng-show="disSubPolicy.Policy=='DoNotAllocate'">
                                        <label class="control-label">Reason</label>
                                        <div class="controls">
                                            <input type="text" data-ng-model="disSubPolicy.Reason" readonly="readonly" />
                                        </div>
                                    </div>
                                    <!--Policy Stakeholder-->
                                    <div class="control-group span5" data-ng-show="disSubPolicy.Policy=='AllocateToStkholder'">
                                        <label class="control-label">Stakeholder</label>
                                        <div class="controls">
                                            <input type="text" readonly="readonly" data-ng-model="disSubPolicy.StakeholdersName" />
                                        </div>
                                    </div>
                                </div>
                                <!--Start & End Date-->
                                <div class="row-fluid">
                                    <!--Start date-->
                                    <div class="control-group span5">
                                        <label class="control-label">Start Date</label>
                                        <div class="controls">
                                            <input type="text" readonly value="{{allocRelation.StartDate|date:'dd-MM-yyyy'}}">
                                        </div>
                                    </div>
                                    <!--End Date-->
                                    <div class="control-group span6">
                                        <label class="control-label">End Date</label>
                                        <div class="controls">
                                            <input type="text" readonly value="{{allocRelation.EndDate|date:'dd-MM-yyyy'}}">
                                        </div>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <!--conditions-->
                                    <div class="control-group span5">
                                        <label class="control-label">Condition</label>
                                        <div class="controls">
                                            <textarea class="resize" data-ng-model="disSubPolicy.Condition" style="width: 622px" readonly="readonly"></textarea>
                                        </div>
                                    </div>
                                </div>

                                <!--Deactivate,Approv, Reject Buttons-->
                                <div class="row-fluid">
                                    <div class="control-group span4">
                                        <div class="controls btn-group">
                                            <button class="btn  btn-danger"
                                                    data-ng-show="allocRelation.Status=='Approved'" data-ng-click="openModelDeactivateSubPolicy(dldata.allocRelation)">
                                                Deactivate
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--upward downward arrows-->
                            <div class="row-fluid span2">
                                <div class="row-fluid text-left">
                                    <div class="btn-group btn-group-vertical">
                                        <button class="btn btn-mini icon-arrow-up" data-ng-disabled="$first" data-ng-click="facotry.upside(disSubPolicy,$index)"></button>
                                        <button class="btn btn-mini icon-arrow-down" data-ng-disabled="$last" data-ng-click="factory.downside(dldata.subPolicy,$index)"></button>
                                    </div>
                                </div>
                            </div>
                            <!--Status Div-->
                            <div class="row-fluid span2">
                                <div class="row-fluid">
                                    <div class="row-fluid text-left">
                                        <label ng-style="dldata.color">Status : {{factory.setStatus(allocRelation.Status)}}</label>
                                    </div>
                                </div>
                                <!--CreatedBy-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color:blue">CreatedBy : {{factory.setStatus(allocRelation.CreatedBy)}}</label>
                                    </div>
                                </div>
                                <!--CreatedDate-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color:blue">CreatedDate : {{factory.setStatus(allocRelation.CreatedOn) | date : 'dd-MM-yyyy'}}</label>
                                    </div>
                                </div>

                                <!--ApprovedBy-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color:blue">ApprovedBy : {{factory.setStatus(allocRelation.ApprovedBy)}}</label>
                                    </div>
                                </div>
                                <!--ApprovedDate-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color:blue">ApprovedDate : {{factory.setStatus(allocRelation.ApprovedOn) | date : 'dd-MM-yyyy'}}</label>
                                    </div>
                                </div>
                                <!--EffectiveFrom-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color:blue">EffectiveFrom : {{factory.setStatus(allocRelation.StartDate) | date : 'dd-MM-yyyy'}}</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </tab>
        <!--UnApproved SubPolicy-->
        <tab heading="UnApproved Subpolicy ( {{(dldata.allocPolicy.AllocRelations | filter:factory.filterRelation(true,'Submitted')).length}} )" class="alert-success">
            <table class="table table-bordered form-horizontal" style="border-color: green">
                <tr data-ng-repeat="allocRelation in dldata.allocPolicy.AllocRelations | filter:factory.filterRelation(true,'Submitted') | orderBy: 'Priority'">
                    <td style="border-color: green">
                        <div data-ng-init="disSubPolicy = factory.getDisplaySubPolicy(allocRelation.AllocSubpolicy)" class=" row-fluid span12">
                            <div class="row-fluid span9">
                                <!--Name & Policy-->
                                <div class="row-fluid">
                                    <!--Name-->
                                    <div class="control-group span5">
                                        <label class="control-label">Name</label>
                                        <div class="controls">
                                            <input type="text"
                                                   data-ng-model="allocRelation.AllocSubpolicy.Name" readonly="readonly" />
                                        </div>
                                    </div>
                                </div>
                                <!--Conditions & Policy Reason/ Stakeholder-->
                                <div class="row-fluid">
                                    <!--Policy-->
                                    <div class="control-group span5">
                                        <label class="control-label">Policy</label>
                                        <div class="controls">
                                            <input type="text" data-ng-model="disSubPolicy.Policy" readonly="readonly" />
                                        </div>
                                    </div>
                                    <!--POlicy Reason-->
                                    <div class="control-group span5" data-ng-show="disSubPolicy.Policy=='DoNotAllocate'">
                                        <label class="control-label">Reason</label>
                                        <div class="controls">
                                            <input type="text" data-ng-model="disSubPolicy.Reason" readonly="readonly" />
                                        </div>
                                    </div>
                                    <!--Policy Stakeholder-->
                                    <div class="control-group span5"
                                         data-ng-show="disSubPolicy.Policy=='AllocateToStkholder'">
                                        <label class="control-label">Stakeholder</label>
                                        <div class="controls">
                                            <input type="text" readonly="readonly"
                                                   data-ng-model="disSubPolicy.StakeholdersName" />
                                        </div>
                                    </div>
                                </div>
                                <!--Start & End Date-->
                                <div class="row-fluid">
                                    <!--Start date-->
                                    <div class="control-group span5">
                                        <label class="control-label">Start Date</label>
                                        <div class="controls">
                                            <input type="text" readonly value="{{allocRelation.StartDate|date:'dd-MM-yyyy'}}">
                                        </div>
                                    </div>
                                    <!--End Date-->
                                    <div class="control-group span6">
                                        <label class="control-label">End Date</label>
                                        <div class="controls">
                                            <input type="text" readonly value="{{allocRelation.EndDate|date:'dd-MM-yyyy'}}">
                                        </div>
                                    </div>
                                </div>
                                <div class="row-fluid">
                                    <!--conditions-->
                                    <div class="control-group span5">
                                        <label class="control-label">Condition</label>
                                        <div class="controls">
                                            <textarea class="resize" data-ng-model="disSubPolicy.Condition"
                                                      style="width: 622px" readonly="readonly"></textarea>
                                        </div>
                                    </div>
                                </div>

                                <!--Deactivate,Approv, Reject Buttons-->
                                <div class="row-fluid">
                                    <div class="control-group span4">
                                        <div class="controls btn-group">
                                            <button class="btn btn-success"
                                                    data-ng-show="allocRelation.Status=='Submitted'"
                                                    data-ng-click="allocRelation.Status='Approved';datalayer.saveAllocPolicy(dldata.allocPolicy)">
                                                Approve
                                            </button>
                                            <button class="btn btn-success" data-ng-show="allocRelation.Status=='Submitted'" data-ng-click="allocRelation.Status='Rejected';datalayer.RejectSubPolicy(allocRelation)">Reject</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!--Status Div-->
                            <div class="row-fluid span2">
                                <div class="row-fluid">
                                    <div class="row-fluid text-left">
                                        <label ng-style="dldata.color">Status : {{factory.setStatus(allocRelation.Status)}}</label>
                                    </div>
                                </div>
                                <!--CreatedBy-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color:blue">CreatedBy : {{factory.setStatus(allocRelation.CreatedBy)}}</label>
                                    </div>
                                </div>
                                <!--CreatedDate-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color:blue">CreatedDate : {{factory.setStatus(allocRelation.CreatedOn) | date : 'dd-MM-yyyy'}}</label>
                                    </div>
                                </div>

                                <!--ApprovedBy-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color:blue">ApprovedBy : {{factory.setStatus(allocRelation.ApprovedBy)}}</label>
                                    </div>
                                </div>
                                <!--ApprovedDate-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color:blue">ApprovedDate : {{factory.setStatus(allocRelation.ApprovedOn) | date : 'dd-MM-yyyy'}}</label>
                                    </div>
                                </div>
                                <!--EffectiveFrom-->
                                <div class="row-fluid ">
                                    <div class="row-fluid text-left">
                                        <label style="color:blue">EffectiveFrom : {{factory.setStatus(allocRelation.StartDate) | date : 'dd-MM-yyyy'}}</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </tab>

        <!--Expired Subpolicy-->
        <tab heading="Expired Subpolicy ( {{(dldata.allocPolicy.AllocRelations | filter:factory.filterRelation(false,'')).length}} )" class="alert-error">
            <table class="table table-bordered form-horizontal" style="border-color: red">
                <tr data-ng-repeat="billingRelation in allocPolicy.AllocRelations | filter:factory.filterRelation(false,'')">
                    <td style="border-color: red">
                        <div data-ng-init="disSubPolicy = datalayer.getDisplaySubPolicy(billingRelation.AllocSubpolicy)" class="row-fluid span10">
                            <!--Name & Policy-->
                            <div class="row-fluid">
                                <!--Name-->
                                <div class="control-group span5">
                                    <label class="control-label">Name</label>
                                    <div class="controls">
                                        <input type="text" data-ng-model="billingRelation.AllocSubpolicy.Name" readonly="readonly" />
                                    </div>
                                </div>
                            </div>
                            <!--Condition & Reason/ Stakeholder-->
                            <div class="row-fluid">
                                <!--Policy-->
                                <div class="control-group span5">
                                    <label class="control-label">Policy</label>
                                    <div class="controls">
                                        <input type="text" data-ng-model="disSubPolicy.Policy" readonly="readonly" />
                                    </div>
                                </div>
                                <!--Policy Reason-->
                                <div class="control-group span5" data-ng-show="disSubPolicy.Policy=='DoNotAllocate'">
                                    <label class="control-label">Reason</label>
                                    <div class="controls">
                                        <input type="text" data-ng-model="disSubPolicy.Reason" readonly="readonly" />
                                    </div>
                                </div>
                                <!--Policy Stakeholder-->
                                <div class="control-group span5" data-ng-show="disSubPolicy.Policy=='AllocateToStkholder'">
                                    <label class="control-label">Stakeholder</label>
                                    <div class="controls">
                                        <input type="text" readonly="readonly" data-ng-model="disSubPolicy.StakeholdersName" />
                                    </div>
                                </div>
                            </div>
                            <!--Start & End Date-->
                            <div class="row-fluid">
                                <!--Start date-->
                                <div class="control-group span5">
                                    <label class="control-label">Start Date</label>
                                    <div class="controls">
                                        <input type="text" readonly value="{{billingRelation.StartDate|date:'dd-MM-yyyy'}}">
                                    </div>
                                </div>
                                <!--End date-->
                                <div class="control-group span6">
                                    <label class="control-label">End Date</label>
                                    <div class="controls">
                                        <input type="text" readonly value="{{billingRelation.EndDate|date:'dd-MM-yyyy'}}">
                                    </div>
                                </div>
                            </div>
                            <div class="row-fluid">
                                <!--Conditions-->
                                <div class="control-group span5">
                                    <label class="control-label">Condition</label>
                                    <div class="controls">
                                        <textarea class="resize" data-ng-model="disSubPolicy.Condition"
                                                  style="width: 622px" readonly="readonly"></textarea>
                                    </div>
                                </div>
                            </div>

                            <!--ReActivate Button-->
                            <div class="row-fluid">
                                <div class="control-group span4">
                                    <div class="controls btn-group">
                                        <button class="btn btn-primary" data-ng-click="openModelReactivateSubPolicy(billingRelation)">Reactivate</button>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--Status Div-->
                        <div class=" row-fluid span2">
                            <div class="row-fluid ">
                                <div class="row-fluid text-left">
                                    <label ng-style="dldata.color">Status : {{factory.expiredPolicyStatus(billingRelation.Status)}}</label>
                                </div>
                            </div>
                            <!--CreatedBy-->
                            <div class="row-fluid ">
                                <div class="row-fluid text-left">
                                    <label style="color:blue">CreatedBy : {{factory.setStatus(billingRelation.CreatedBy)}}</label>
                                </div>
                            </div>
                            <!--CreatedDate-->
                            <div class="row-fluid ">
                                <div class="row-fluid text-left">
                                    <label style="color:blue">CreatedDate : {{factory.setStatus(billingRelation.CreatedOn) | date : 'dd-MM-yyyy'}}</label>
                                </div>
                            </div>

                            <!--ApprovedBy-->
                            <div class="row-fluid ">
                                <div class="row-fluid text-left">
                                    <label style="color:blue">ApprovedBy : {{factory.setStatus(billingRelation.ApprovedBy)}}</label>
                                </div>
                            </div>
                            <!--ApprovedDate-->
                            <div class="row-fluid ">
                                <div class="row-fluid text-left">
                                    <label style="color:blue">ApprovedDate : {{factory.setStatus(billingRelation.ApprovedOn) | date : 'dd-MM-yyyy'}}</label>
                                </div>
                            </div>
                            <!--EffectiveFrom-->
                            <div class="row-fluid ">
                                <div class="row-fluid text-left">
                                    <label style="color:blue">EffectiveFrom : {{factory.setStatus(billingRelation.StartDate) | date : 'dd-MM-yyyy'}}</label>
                                </div>
                            </div>

                        </div>

                    </td>
                </tr>
            </table>
        </tab>
        <!--Draft Subpolicy-->
        <tab heading="Draft Subpolicy ( {{dldata.subPolicyList.length}} )" class="alert-info">
            <table class="table table-bordered form-horizontal" style="border-color: blue">
                <tr data-ng-repeat="subPolicy in dldata.subPolicyList">
                    <td style="border-color: blue">
                        <div data-ng-init="disSubPolicy = factory.getDisplaySubPolicy(subPolicy)" class="span10">
                            <div class="row">
                                <div class="control-group span6">
                                    <label class="control-label">Name</label>
                                    <div class="controls">
                                        <input type="text"
                                               data-ng-model="subPolicy.Name" readonly="readonly" />
                                    </div>
                                </div>
                            </div>
                            <!--Policy-->
                            <div class="row">
                                <div class="control-group span5">
                                    <label class="control-label">Policy</label>
                                    <div class="controls">
                                        <input type="text" data-ng-model="disSubPolicy.Policy" readonly="readonly" />
                                    </div>
                                </div>
                                <div data-ng-show="disSubPolicy.Policy=='DoNotAllocate'" class="control-group span5">
                                    <label class="control-label">Reason</label>
                                    <div class="controls">
                                        <input type="text" data-ng-model="disSubPolicy.Reason" readonly="readonly" />
                                    </div>
                                </div>
                                <div data-ng-show="disSubPolicy.Policy=='AllocateToStkholder'" class="control-group span5">
                                    <label class="control-label">Stakeholder</label>
                                    <div class="controls">
                                        <input type="text" readonly="readonly" data-ng-model="disSubPolicy.StakeholdersName" />
                                    </div>
                                </div>
                            </div>
                            <div class="row">
                                <!--Condition-->
                                <div class="control-group span5">
                                    <label class="control-label">Condition</label>
                                    <div class="controls">
                                        <textarea id="foo" data-ng-model="disSubPolicy.Condition" style="width: 635px" readonly="readonly"></textarea>
                                    </div>
                                </div>
                            </div>
                            <!--Activate Button-->
                            <div class="row">
                                <div class="control-group span4">
                                    <div class="controls btn-group">
                                        <button class="btn btn-primary" data-ng-click="openModelNewSubPolicy(subPolicy,$index)">Activate</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </tab>
    </tabset>
</div>