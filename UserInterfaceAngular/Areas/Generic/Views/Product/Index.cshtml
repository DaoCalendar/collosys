@{
    ViewBag.Title = "Product Configuration";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!--row for table to show working list-->

<div class="container-fluid" data-ng-controller="ProductConfigController" data-ng-cloak="">
    <div class="row-fluid text-center well" data-ng-hide="productList.length > 0">
        <label class="info">No Product Config Details</label>
    </div>

    <div class="row-fluid">
        <div style="overflow: scroll; height: 400px;">
            <table class="table table-bordered table-hover" style="width: 90%">
                <thead>
                    <tr>
                        <th>Action</th>
                        <th>Product</th>
                        <th>Product Group</th>
                        <th>Allocation Reset Strategy</th>
                        <th>Billing Strategy</th>
                        <th>Has Telecalling</th>
                        <th>FR Cycle Cut Off Days</th>
                        <th>FR Month Cut Off Days</th>
                        <th>Cycle Codes</th>

                    </tr>
                    <tr>
                        @*<th><i class="btn icon-plus" data-ng-click="openModel()"></i></th>*@
                        <th>
                            <input type="text" data-ng-model="search.ProductName" /></th>
                        <th>
                            <input type="text" data-ng-model="search.ProductGroup" /></th>
                        <th>
                            <input type="text" data-ng-model="search.AllocationResetStrategy" /></th>
                        <th>
                            <input type="text" data-ng-model="search.BillingStrategy" /></th>
                        <th>
                            <input type="text" data-ng-model="search.HasTelecalling" /></th>
                        <th>
                            <input type="text" data-ng-model="search.FrCutOffDaysCycle" /></th>
                        <th>
                            <input type="text" data-ng-model="search.FrCutOffDaysMonth" /></th>
                        <th>
                            <input type="text" data-ng-model="search.CycleCodes" /></th>
                    </tr>
                </thead>

                <tbody>
                    <tr data-ng-repeat="product in productList | filter:search">
                        <td>
                            <div class="btn-group">
                                <i class="btn icon-file-alt" data-ng-click="openModelData(product,true,$index)"></i>
                                <i class="btn icon-edit" data-ng-click="openModelData(product,false,$index)"></i>
                               @* <i class="btn icon-trash" data-ng-show="true" data-ng-click="showDeleteModelPopup(product,$index)"></i>*@
                            </div>
                        </td>
                        <td>{{product.Product}}</td>
                        <td>{{product.ProductGroup}}</td>
                        <td>{{product.AllocationResetStrategy}}</td>
                        <td>{{product.BillingStrategy}}</td>
                        <td>{{product.HasTelecalling}}</td>
                        <td>{{product.FrCutOffDaysCycle}}</td>
                        <td>{{product.FrCutOffDaysMonth}}</td>
                        <td>{{product.CycleCodes}}</td>
                    </tr>
                </tbody>

            </table>
        </div>

        <!-- Confirmation Popup -->
        <div modal="showDeleteModel" close="noToDelete()" options="modelOption">
            <div class="modal-header well-small2">
                Confirm to Delete
            </div>
            <div class="modal-body">
                Are you sure to Delete?
            </div>
            <div class="modal-footer well">
                <div class="row-fluid">
                    <span class="left">
                        <input type="button" value="Yes" class="btn btn-success" data-ng-click="yesToDelete()" />
                        <input type="button" value="No" class="btn btn-info" data-ng-click="noToDelete()" />
                    </span>
                </div>
            </div>
        </div>

        <div style="width: 350px">
            <form name="form" novalidate>
                    <div modal="shouldBeOpen" close="closeModel()" options="modelOption">
                        <div class="modal-header well">
                            <div class="modal-title">{{modelHeader}}</div>
                        </div>

                        <div data-ng-form="formAddProduct">

                            <div class="modal-body form-horizontal">

                                <!--Product Name -->
                                <div class="row-fluid control-group">
                                    <label class="control-label">Product Name </label>
                                    <div class="controls">
                                        <input type="text" maxlength="40" name="input" data-ng-model="productconfig.Product" data-ng-pattern="/^\w*$/" data-ng-disabled="true" required placeholder="Enter Product Name" />
                                    </div>
                                </div>

                                <!--Product Group -->
                                <div class="row-fluid control-group">
                                    <label class="control-label">Product Group </label>
                                    <div class="controls">
                                        <input type="text" maxlength="40" data-ng-model="productconfig.ProductGroup" data-ng-pattern="/^\w*$/" data-ng-disabled="true" required placeholder="Enter Product Group" />
                                    </div>
                                </div>

                                <!--Allocation Reset Strategy -->
                                <div class="row-fluid control-group">
                                    <label class="control-label">Allocation Reset Strategy </label>
                                    <div class="controls">
                                        <div class="btn-group">
                                            <button type="button" data-ng-model="productconfig.AllocationResetStrategy" data-ng-class="isSelected(productconfig.AllocationResetStrategy,'Monthly')" btn-radio="'Monthly'" value="Monthly" data-ng-disabled="isReadOnly">Has Month End Reset</button>
                                            <button type="button" data-ng-model="productconfig.AllocationResetStrategy" data-ng-class="isSelected(productconfig.AllocationResetStrategy,'Cyclewise')" btn-radio="'Cyclewise'" value="Cyclewise" data-ng-disabled="isReadOnly">Has Cycle Wise Reset</button>
                                        </div>
                                    </div>
                                </div>

                                <!--Billing Reset Strategy -->
                                <div class="row-fluid control-group">
                                    <label class="control-label">Billing Reset Strategy </label>
                                    <div class="controls">
                                        <div class="btn-group">
                                            <button type="button" data-ng-disabled="isReadOnly" data-ng-class="isSelected(productconfig.BillingStrategy,'Cyclewise')" data-ng-model="productconfig.BillingStrategy" btn-radio="'Cyclewise'" value="Cyclewise">Cycle End</button>
                                            <button type="button" data-ng-disabled="isReadOnly" data-ng-class="isSelected(productconfig.BillingStrategy,'Monthly')" data-ng-model="productconfig.BillingStrategy" btn-radio="'Monthly'" value="Monthly">Month End(Open And Close Cycle)</button>
                                            <button type="button" data-ng-disabled="isReadOnly" data-ng-class="isSelected(productconfig.BillingStrategy,'MonthlyConfirmed')" data-ng-model="productconfig.BillingStrategy" btn-radio="'MonthlyConfirmed'" value="MonthlyConfirmed" >Month End(Close Cycle Only)</button>
                                        </div>
                                    </div>
                                </div>

                                <!-- Has Telecalling -->
                                <div class="row-fluid control-group">
                                    <label class="control-label">Has Telecalling </label>
                                    <div class="controls">
                                        <div class="btn-group" data-ng-disabled="isReadOnly">
                                            <button type="button" data-ng-class="isSelected(productconfig.HasTelecalling,true)" data-ng-model="productconfig.HasTelecalling" btn-radio="true" data-ng-disabled="isReadOnly">Yes</button>
                                            <button type="button" data-ng-class="isSelected(productconfig.HasTelecalling,false)" data-ng-model="productconfig.HasTelecalling" btn-radio="false" data-ng-change="noTelecalling(productconfig)" data-ng-disabled="isReadOnly">No</button>
                                        </div>
                                    </div>
                                </div>

                                <div data-ng-show="productconfig.HasTelecalling" class="well">

                                    <div class="row-fluid control-group">
                                        <label class="control-label">FR Cycle Cut Off Days *</label>
                                        <div class="controls">
                                            <input type="number" data-ng-model="productconfig.FrCutOffDaysCycle" data-ng-disabled="isReadOnly" min="0" max="30" data-ng-required="productconfig.HasTelecalling" placeholder="Enter FR Cycle Cut Off Days" />
                                        </div>
                                    </div>

                                    <div class="row-fluid control-group">
                                        <label class="control-label">FR Month Cut Off Days *</label>
                                        <div class="controls">
                                            <input type="number" data-ng-model="productconfig.FrCutOffDaysMonth" data-ng-disabled="isReadOnly" min="0" max="30" data-ng-required="productconfig.HasTelecalling" placeholder="Enter FR Month Cut Off Days" />
                                        </div>
                                    </div>

                                </div>

                                <div class="row-fluid control-group">
                                    <label class="control-label">Cycle Codes *</label>
                                    <div class="controls">
                                        <select ui-select2="select2Options" class="select2-container-multi input-large" data-ng-model="productconfig.CycleCodes" multiple="multiple" data-placeholder="Select Cycle Codes" data-ng-readonly="isReadOnly" data-ng-required="true">
                                            <option data-ng-repeat="code in codes" value="{{code}}">{{code}}</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="modal-footer well">

                                <div class="row-fluid control-group">
                                    <div class="controls">
                                        <button class="btn btn-success" data-ng-show="!isReadOnly" data-ng-click="saveProduct(productconfig)" data-ng-disabled="!formAddProduct.$valid">Save</button>
                                        <button class="btn btn-info" data-ng-show="!isReadOnly" data-ng-click="closeModel()">Cancel</button>
                                        <button class="btn btn-info" data-ng-show="isReadOnly" data-ng-click="closeModel()">Close</button>
                                    </div>

                                </div>
                            </div>

                        </div>

                    </div>
            </form>
        </div>
    </div>
</div>

@section scripts{
    <script src="~/Areas/Generic/ViewModels/ProductConfigModel.js"></script>
}

