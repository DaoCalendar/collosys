<div class="row-fluid" data-ng-controller="PaymentDetails">
    
    <div class="row-fluid">
        <table class="table table-bordered table-hover">
            <thead>
                <tr>
                    <th>{{$parent.Stakeholder.StkhPayments.length}}</th>
                    <th>FixpayBasic</th>
                    <th>FixpayHra</th>
                    <th>FixpayOther</th>
                    <th>FixpayTotal</th>
                    <th>ServiceCharge</th>
                    <th>MobileElig</th>
                    <th>TravelElig</th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="data in $parent.Stakeholder.StkhPayments">
                    <td >
                        <div class="btn-group" data-ng-show="$parent.Stakeholder.StkhPayments.length>1">
                            <i class="btn icon-trash" data-ng-click=""></i>
                        </div>
                    </td>
                    <td>{{data.FixpayBasic}}</td>
                    <td>{{data.FixpayHra}}</td>
                    <td>{{data.FixpayOther}}</td>
                    <td>{{data.FixpayTotal}}</td>
                    <td>{{data.ServiceCharge}}</td>
                    <td>{{data.MobileElig}}</td>
                    <td>{{data.TravelElig}}</td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <!--Payment Controls-->
    <div class="row-fluid">
        <!--Variable Payment-->
        <div class="row-fluid" data-ng-show="Hierarchy.HasVarible">
            <h5 style="font-weight: normal;">Variable Pay</h5>
            <hr />
            <div class="row-fluid">
                <div class="control-group span6">
                    <label class="control-label">Collection Policy:</label>
                    <div class="controls">
                        <select data-ui-select2="" 
                                id="linerPolicy" 
                                data-ng-required="Hierarchy.HasVarible" 
                                data-ng-model="Payment.VariableLiner" 
                                data-ng-options="c for c in LinerPolicyList" 
                                style="min-width: 200px;"
                            ></select>
                    </div>
                </div>
                <div class="control-group span6">
                    <label class="control-label">Recovery Policy:</label>
                    <div class="controls">
                        <select data-ui-select2="" 
                                id="writeoffPolicy" 
                                data-ng-required="Hierarchy.HasVarible" 
                                data-ng-model="Payment.VariableWriteoff" 
                                data-ng-options="c for c in WriteoffPolicies" 
                                style="min-width: 200px;"
                            ></select>
                    </div>
                </div>
            </div>
        </div>

        <!--Fixed Pay-->
        <div class="row-fluid" data-ng-show="Hierarchy.HasFixed">
            <h5 style="font-weight: normal;">Fixed Pay</h5>
            <hr />
            <div class="row-fluid">
                <div class="row-fluid">
                    <div class="control-group span6">
                        <label class="control-label">Basic :</label>
                        <div class="controls">
                            <div class="input-prepend">
                                <span class="add-on"><i class="icon-rupee"></i></span>
                                <input type="number"
                                       name="FixpayBasic"
                                       data-ng-required="Hierarchy.HasFixed" 
                                       min="0" 
                                       data-ng-maxlength="5" 
                                       data-ng-model="Payment.FixpayBasic" 
                                    />
                            </div>
                            <div class="error">
                                <span class="field-validation-error" data-ng-show="paymentDetailsForm.FixpayBasic.$error.maxlength">{{val.MaxLength('5')}}</span>
                                <span class="field-validation-error" data-ng-show="paymentDetailsForm.FixpayBasic.$error.min">{{ val.MinLength('0')}} </span>
                            </div>
                        </div>
                    </div>
                    <div class="control-group span6" data-ng-show="Hierarchy.HasFixedIndividual">
                        <label class="control-label">Hra :</label>
                        <div class="controls">
                            <div class="input-prepend">
                                <span class="add-on"><i class="icon-rupee"></i></span>
                                <input type="number" data-ng-required="Hierarchy.HasFixedIndividual" min="0" data-ng-maxlength="5" data-ng-model="Payment.FixpayHra" name="FixpayHra" />
                            </div>
                            <div class="error">
                                <span class="field-validation-error" data-ng-show="paymentDetailsForm.FixpayHra.$error.maxlength">{{val.MaxLength('5')}}</span>
                                <span class="field-validation-error" data-ng-show="paymentDetailsForm.FixpayHra.$error.min">{{ val.MinLength('0')}} </span>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="row-fluid">
                    <div class="control-group span6" data-ng-show="Hierarchy.HasFixedIndividual">
                        <label class="control-label">Other :</label>
                        <div class="controls">
                            <div class="input-prepend">
                                <span class="add-on"><i class="icon-rupee"></i></span>
                                <input type="number" 
                                       data-ng-required="Hierarchy.HasFixedIndividual" 
                                       min="0" 
                                       data-ng-maxlength="5" 
                                       data-ng-model="Payment.FixpayOther" 
                                       name="FixpayOther" 
                                    />
                            </div>
                            <div class="error">
                                <span class="field-validation-error" data-ng-show="paymentDetailsForm.FixpayOther.$error.maxlength">{{val.MaxLength('5')}}</span>
                                <span class="field-validation-error" data-ng-show="paymentDetailsForm.FixpayOther.$error.min">{{ val.MinLength('0')}} </span>
                            </div>
                        </div>
                    </div>
                    <div class="control-group span6 info" data-ng-show="false">
                        <label class="control-label">Total:</label>
                        <div class="controls">
                            <div class="input-prepend">
                                <span class="add-on"><i class="icon-rupee"></i></span>
                                <input type="text" 
                                       data-ng-model="Payment.FixpayTotal" 
                                       disabled value="{{Payment.FixpayTotal=TotalPayment(Payment.FixpayBasic,Payment.FixpayHra,Payment.FixpayOther)}}" 
                                    />
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row-fluid" data-ng-show="Hierarchy.HasFixedIndividual">
                <table class="table table-bordered table-hover" data-ng-show="Payment.FixpayBasic">
                    <thead>
                        <tr>
                            <th data-ng-show="Payment.FixpayBasic">Basic</th>
                            <th data-ng-show="Payment.FixpayHra && Payment.FixpayOther">Allowances</th>
                            <th data-ng-show="Payment.FixpayBasic">Employee PF</th>
                            <th data-ng-show="Payment.FixpayBasic">Employer PF</th>
                            <th>Employee ESIC</th>
                            <th>Employer ESIC</th>
                            <th>Service Charge</th>
                            <th>Service Tax</th>
                            <th>Gross Pay</th>
                        </tr>
                        <tr>
                            <th data-ng-show="Payment.FixpayBasic"></th>
                            <th data-ng-show="Payment.FixpayHra && Payment.FixpayOther"></th>
                            <th data-ng-show="Payment.FixpayBasic">Basic * {{FixedPay.EmployeePF}}%</th>
                            <th data-ng-show="Payment.FixpayBasic">Basic * {{FixedPay.EmployerPF}}%</th>
                            <th>Basic * {{FixedPay.EmployeeESIC}}%</th>
                            <th>Basic * {{FixedPay.EmployerESIC}}% </th>
                            <th>Basic * {{FixedPay.ServiceCharge}}%</th>
                            <th>Basic * {{FixedPay.ServiceTax}}% </th>
                            <th></th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td data-ng-show="Payment.FixpayBasic">{{Payment.FixpayBasic}}</td>
                            <td data-ng-show="Payment.FixpayHra && Payment.FixpayOther">{{Payment.FixpayHra*1 + Payment.FixpayOther*1}}
                            </td>

                            <td data-ng-show="Payment.FixpayBasic">{{(SalDetails.pf*1)}}</td>
                            <td data-ng-show="Payment.FixpayBasic">{{(SalDetails.pf*1)}}</td>
                            <td>{{SalDetails.esicEmployee}}</td>
                            <td>{{SalDetails.esicEmployer}}</td>
                            <td>{{SalDetails.serviceCharge}}</td>
                            <td>{{SalDetails.serviceTax}}</td>
                            <td>{{Payment.FixpayTotal}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!--Allowances-->
        <div class="row-fluid" data-ng-show="Hierarchy.HasMobileTravel">
            <h5 style="font-weight: normal;">Reimbursements</h5>
            <hr/>

            <div class="row-fluid">
                <div class="control-group span6">
                    <label class="control-label">Mobile:</label>
                    <div class="controls">
                        <input type="number" 
                               data-ng-required="Hierarchy.HasMobileTravel" 
                               min="0" 
                               data-ng-maxlength="5" 
                               data-ng-model="Payment.MobileElig" 
                               name="MobileElig" 
                            />
                        <div class="error">
                            <span class="field-validation-error" data-ng-show="paymentDetailsForm.MobileElig.$error.maxlength">{{val.MaxLength('5')}}</span>
                            <span class="field-validation-error" data-ng-show="paymentDetailsForm.MobileElig.$error.min">{{ val.MinLength('0')}} </span>
                        </div>
                    </div>
                </div>
                <div class="control-group span6">
                    <label class="control-label">Travel:</label>
                    <div class="controls">
                        <input type="number" 
                               data-ng-required="!Hierarchy.HasMobileTravel" 
                               min="0" 
                               data-ng-maxlength="5" 
                               data-ng-model="Payment.TravelElig" 
                               name="TravelElig" 
                            />
                        <div class="error">
                            <span class="field-validation-error" data-ng-show="paymentDetailsForm.TravelElig.$error.maxlength">{{val.MaxLength('5')}}</span>
                            <span class="field-validation-error" data-ng-show="paymentDetailsForm.TravelElig.$error.min">{{ val.MinLength('0')}} </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!--Other Pay-->
        <div class="row-fluid" data-ng-show="Hierarchy.HasServiceCharge">
            <h5 style="font-weight: normal;">Other Charges</h5>
            <hr />
            <div class="row-fluid">
                <div class="control-group span6">
                    <label class="control-label">Service Charge:</label>
                    <div class="controls">
                        <div class="input-append">
                            <input type="text"
                                   data-ng-required="Hierarchy.HasServiceCharge"
                                   data-ng-pattern="/^100$|^\d{0,2}(\.\d{1,2})? *%?$/"
                                   data-ng-maxlength="99.99"
                                   class="input-mini"
                                   data-ng-model="Payment.ServiceCharge" name="ServiceCharge" />
                            <span class="add-on">%</span>
                        </div>
                        <div class="error">
                            <span class="field-validation-error" data-ng-show="paymentDetailsForm.ServiceCharge.$error.pattern">Enter valid percentage</span>
                            <span class="field-validation-error" data-ng-show="paymentDetailsForm.ServiceCharge.$error.maxlength">Max Length 99.99</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row-fluid text-center">
            <button data-ng-click="AddPaymentEdit(Payment)" class="btn btn-success" data-ng-disabled="paymentDetailsForm.$invalid">Add Payment</button>
        </div>
    </div>
</div>
