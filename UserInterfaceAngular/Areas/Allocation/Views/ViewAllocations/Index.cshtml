@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row-fluid" data-ng-controller="viewallocationsCtrl">
    <div class="row-fluid form-horizontal" data-ng-form="alloc">
        <div class="row-fluid">
            <div class="row-fluid">
                <div class="control-group span6">
                    @*<label class="control-label">Product</label>
                <div class="controls">
                    <select data-ui-select2=""
                            data-ng-model="DataModel.Product"
                            data-ng-requiered="true"
                            class="input-medium">
                        <option></option>
                        <option data-ng-repeat="product in productList">{{product}}</option>

                    </select>*@
                    <label class="control-label">Product</label>
                    <div class="controls">
                        <select data-ui-select2=""
                            data-ng-model="DataModel.Product"
                            data-ng-requiered="true"
                            class="input-medium">
                            <option></option>
                            <option data-ng-repeat="data in productList">{{data}}</option>

                        </select>
                    </div>
                </div>

                <div class="control-group span6">
                    <label class="control-label">Category</label>
                    <div class="controls">
                        <select data-ui-select2=""
                            data-ng-model="DataModel.Category"
                            data-ng-requiered="true"
                            class="input-medium">
                            <option></option>
                            <option data-ng-repeat="category in categoryList">{{category}}</option>
                        </select>
                    </div>
                </div>
            </div>
            @* <div class="row-fluid">
                <div class="control-group span6">
                    <label class="control-label">Start Date</label>
                    <div class="controls">
                        <div class="input-append">
                            <input type="text" class="input-medium"
                                   data-ng-model="DataModel.StartDate"
                                   data-date-format="dd-mm-yyyy" bs-datepicker>
                            <button type="button" class="btn" data-toggle="datepicker"><i class="icon-calendar"></i></button>
                        </div>
                    </div>
                </div>
                <div class="control-group span6">
                    <label class="control-label">End Date</label>
                    <div class="controls">
                        <div class="input-append">
                            <input type="text" class="input-medium"
                                data-ng-model="DataModel.EndDate"
                                data-date-format="dd-mm-yyyy" bs-datepicker>
                            <button type="button" class="btn" data-toggle="datepicker"><i class="icon-calendar"></i></button>
                        </div>
                    </div>
                </div>
            </div>*@
        </div>
        <div class="row-fluid">
            <div class="control-group span6">
                <label class="control-label">Date</label>
                <div class="controls">
                    <div class="input-append">
                        <input type="text" class="input-medium"
                            data-ng-model="DataModel.AllocDate"
                            data-date-format="dd-mm-yyyy" bs-datepicker>
                        <button type="button" class="btn" data-toggle="datepicker"><i class="icon-calendar"></i></button>
                    </div>
                </div>
            </div>
            <div class="control-group span6">
                <label class="control-label">For Stakeholder</label>
                <div class="controls">
                    <select data-ui-select2=""
                        data-ng-model="DataModel.StaekholderId"
                        data-ng-requiered="true"
                        class="input-medium">
                        <option></option>
                        <option data-ng-repeat="stake in Stakeholders" value="{{stake.Id}}">{{stake.Name}}</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="control-group">
            <div class="controls">
                <input type="button" data-ng-click="GetAllocList(DataModel)" class="btn btn-success" value="Get Allocations" data-ng-show="alloc" />
            </div>
        </div>

    </div>

    <div class="row-fluid span12">
        <table class="table table-bordered table-condensed table-hover"
            data-ng-show="AllocListModelList.length>0">
            <thead>
                <tr>
                    <th>Cycle</th>
                    <th>Account No</th>
                    <th>Customer Name</th>
                    <th>Pincode</th>
                    <th>Product</th>
                    <th>Amount Due</th>
                    <th>Start Date</th>
                    <th>End Date</th>
                    <th>IsAllocated</th>
                    <th>Allocation Status</th>
                </tr>
                @*<tr>
                    <th>
                        <div class="input-append">
                            <input type="text" class="input-small" data-ng-model="search.Cycle" placeholder="Search by Cycle">
                            <span class="add-on"><i class="icon-search"></i></span>
                        </div>
                    </th>
                    <th>
                        <div class="input-append">
                            <input type="text" class="input-small" data-ng-model="search.Liner.AccountNo" placeholder="Search by Cycle">
                            <span class="add-on"><i class="icon-search"></i></span>
                        </div>
                    </th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th> </th>
                </tr>*@
            </thead>
            <tbody>
                <tr data-ng-repeat="data in filteredTodos | filter:search">

                    <td>{{data.Liner.Cycle}}</td>
                    <td>{{data.Liner.AccountNo}}</td>
                    <td>{{data.Liner.CustomerName}}</td>
                    <td>{{data.Liner.Pincode}}</td>
                    <td>{{data.Liner.Product}}</td>
                    <td>{{data.Alloc.AmountDue}}</td>
                    <td>{{data.Alloc.StartDate | date}}</td>
                    <td>{{data.Alloc.EndDate | date}}</td>
                    <td>{{data.Alloc.IsAllocated}}</td>
                    <td>{{data.Liner.AllocStatus}}</td>
                </tr>
            </tbody>
        </table>
        <div class="text-right" data-ng-show="AllocListModelList.length>0">
            <div data-pagination="" data-num-pages="numPages()"
                data-current-page="currentPage" data-max-size="maxSize"
                data-boundary-links="true">
            </div>
        </div>
        <div class="row-fluid text-center" data-ng-hide="AllocListModelList.length>0">
            <h4>No Allocation for above crtieria</h4>
        </div>
    </div>
</div>
@section scripts
{
    <script src="~/Areas/Allocation/ViewModels/ViewAllocations.js"></script>
}
