@{
    ViewBag.Title = "ChangeAllocationBulk";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row-fluid" data-ng-controller="bulkCtrl">
    <div class="row-fluid form-horizontal" data-ng-form="bulkchange">
        <div class="row-fluid">
            <div class="row-fluid">
                <div class="control-group span3">
                    <label class="control-label">Product</label>
                    <div class="controls">
                        <select data-ui-select2=""
                            data-ng-model="BulkAllocationModel.Product"
                            data-ng-requiered="true"
                            class="input-medium">
                            <option></option>
                            <option data-ng-repeat="data in productList">{{data}}</option>
                        </select>
                    </div>
                </div>
                <div class="control-group span3">
                    <label class="control-label">Category</label>
                    <div class="controls">
                        <select data-ui-select2=""
                            data-ng-model="BulkAllocationModel.Category"
                            data-ng-requiered="true"
                            class="input-medium">
                            <option></option>
                            <option data-ng-repeat="category in categoryList">{{category}}</option>
                        </select>
                    </div>
                </div>
                <div class="control-group span3">
                    <label class="control-label">Stakeholder</label>
                    <div class="controls">
                        <select data-ui-select2=""
                            data-ng-model="BulkAllocationModel.Stakeholder"
                            data-ng-requiered="true"
                            class="input-medium">
                            <option></option>
                            <option data-ng-repeat="stake in Stakeholders" value="{{stake.Id}}">{{stake.Name}}</option>
                        </select>
                    </div>
                </div>
                <div class="control-group span3 text-left">
                    <div class="controls">
                        <input type="submit" value="Get Allocations" class="btn btn-success" data-ng-click="GetAllocations(BulkAllocationModel)" />
                    </div>
                </div>
            </div>

            <div class="row-fluid" data-ng-show="AllocationsList.length>0">
                <div class="control-group span3">
                    <label class="control-label">Change Allocations As</label>
                    <div class="controls">
                        <select data-ui-select2=""
                            data-ng-model="BulkAllocationModel.AllocationType"
                            data-ng-requiered="true"
                            class="input-medium">
                            <option></option>
                            <option value="DoNotAllocate">Do Not Allocate</option>
                            <option value="AllocateAsPerPolicy">As per Policy</option>
                            <option value="AllocateToStkholder">Allocate to Stakeholder</option>
                        </select>
                    </div>
                </div>

                <div class="control-group span3" data-ng-show="BulkAllocationModel.AllocationType=='AllocateToStkholder'">
                    <label class="control-label">Allocate To</label>
                    <div class="controls">
                        <select data-ui-select2=""
                                data-ng-model="BulkAllocationModel.ToStakeholder"
                                data-ng-requiered="true"
                                class="input-medium">
                            <option></option>
                            <option data-ng-repeat="stake in Stakeholders" value="{{stake.Id}}">{{stake.Name}}</option>
                        </select>
                    </div>
                </div>
                
                <div class="control-group span3" data-ng-show="BulkAllocationModel.AllocationType">
                    <label class="control-label">Change Reason</label>
                    <div class="controls">
                        <select data-ui-select2=""
                                data-ng-model="BulkAllocationModel.ChangeReason"
                                data-ng-requiered="true"
                                class="input-medium">
                            <option></option>
                            <option>StakeholderOnLeave</option>
                            <option>StakeholderLeftJob</option>
                        </select>
                    </div>
                </div>
                
                <div class="control-group span3" data-ng-show="BulkAllocationModel.AllocationType && BulkAllocationModel.ChangeReason">
                    <div class="controls">
                        <input type="button" value="Change Allocations" data-ng-click="changeAllocations(BulkAllocationModel)" class="btn btn-success"/>
                    </div>
                </div>
            </div>

            <div class="row-fluid">
                <table class="table table-bordered table-condensed table-hover"
                    data-ng-show="AllocationsList.length>0">
                    <thead>
                        <tr>
                            <th>Cycle</th>
                            <th>Account No</th>
                            <th>Customer Name</th>
                            <th>Pincode</th>
                            <th>Product</th>
                            <th>Amount Due</th>
                            <th>Start Date</th>
                            <th>End Date</th>
                            <th>IsAllocated</th>
                            <th>Allocation Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        @Html.Partial("RAllocShow")
                    </tbody>
                </table>

                <div class="row-fluid" data-ng-show="AllocationsList.length>0">
                    <div class="text-left">
                        Total Allocations:{{AllocationsList.length}}
                    </div>
                    <div class="text-right">
                        <div data-pagination="" data-num-pages="numPages()"
                            data-current-page="currentPage" data-max-size="maxSize"
                            data-boundary-links="true">
                        </div>
                    </div>
                </div>

                <div class="row-fluid text-center" data-ng-hide="AllocationsList.length>0">
                    <h4>No Allocation for above crtieria</h4>
                </div>
            </div>
        </div>


    </div>
</div>

@section scripts
{
    <script src="~/Areas/Allocation/ViewModels/bulkChangeAllocation.js"></script>
}
