@{
    ViewBag.Title = "Approve";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="row-fluid ng-cloak" ng-cloak ng-controller="approveCtrl">

    <div class="row-fluid" ng-show="listOfStakeholders.length>0">

        <div class="btn-toolbar">
            <div class="row-fluid">
                <div class="btn-group">
                    <button type="button" class="btn btn-success" ng-click="showApproveAllModelFun()">Approve All</button>
                </div>
            </div>
        </div>
        <!--row for show all stakeholders-->
        <div class="row-fluid">
            @Html.Partial("ApproveList")
        </div>

        @* <div class="panel">
            <div class="panel-heading">
                Stakeholders
            </div>

            <div class="row-fluid">
                @Html.Partial("ApproveList")
            </div>
        </div>*@

    </div>

    <div class="row-fluid text-center" ng-hide="listOfStakeholders.length > 0">
        <label class="info">No Stakeholder for Approval</label>
    </div>

    <!--model for approve single stakeholder-->
    <div modal="count>0" close="closeModel()" options="modelOption">
        <div class="modal-header well-small2">
            Stakeholder Details
        </div>
        <div class="row-fluid">
            @*<div class="alert alert-danger">
                * Mandatory fields
            </div>*@
            <div class="text-right text-error">
                * Mandatory fields
            </div>
        </div>

        <div class="modal-body">
            <!--row for show stakeholder for single edit-->
            <div class="row-fluid" ng-show="count>0">

                <!--row for details-->
                <div class="panel">
                    <div class="panel-heading">Details</div>
                    <div class="row-fluid">
                        @Html.Partial("ListViews/StakeDetails")
                    </div>
                </div>

                <div class="panel" data-ng-show="Hierarchy.HasRegistration">
                    <div class="panel-heading">Registration</div>
                    <div class="row-fluid" ng-show="Stakeholder.StkhRegistrations.length>0 && Hierarchy.HasRegistration">
                        @Html.Partial("EditRegistration")
                    </div>
                </div>

                <div class="panel" ng-show="Hierarchy.HasWorking && Stakeholder.StkhWorkings.length>0">
                    <div class="panel-heading">
                        Working Details
                    </div>
                    <div class="row-fluid">
                        @Html.Partial("ListViews/Working")
                    </div>
                    @* <div class="row-fluid" ng-show="isApprovedFirst && Stakeholder.IsWorkingChange" ng-form="rejectWorking">
                        <div class="control-group">
                            <label class="control-label">
                                Rejection Reason
                            </label>
                            <!-- <textarea ng-model="RejectWorking" ng-required="Stakeholder.IsWorkingChange"></textarea> -->
                            <input type="text" ng-model="RejectWorking" ng-required="Stakeholder.IsWorkingChange" />
                        </div>
                    </div>

                    <div class="panel-footer" ng-show="isApprovedFirst && Stakeholder.IsWorkingChange">
                        <input type="button" value="Approve Working" ng-click="approveWorking()" ng-disabled="!Stakeholder.IsWorkingChange" class="btn btn-info" />
                        <input type="button" value="Reject Working" ng-click="rejectWorkingDetails()" ng-disabled="!rejectWorking.$valid" class="btn btn-info" />
                    </div>*@
                </div>

                <div class="panel" ng-show="Hierarchy.HasPayment && Stakeholder.StkhPayments.length>0">
                    <div class="panel-heading">
                        Payments Details 
                    </div>
                    <div class="row-fluid">
                        @Html.Partial("ListViews/Payments")
                    </div>
                    @* <div class="row-fluid" ng-show="isApprovedFirst && Stakeholder.IsPaymentChange" ng-form="rejectPayment">
                        <div class="control-group">
                            <label class="control-label">
                                Rejection Reason
                            </label>
                            <input type="text" ng-model="RejectPayment" ng-required="Stakeholder.IsPaymentChange" />
                        </div>
                    </div>

                    <div class="panel-footer" ng-show="isApprovedFirst && Stakeholder.IsPaymentChange">
                        <input type="button" value="Approve Payment" ng-click="approvePayment()" ng-disabled="!Stakeholder.IsPaymentChange" class="btn btn-info" />
                        <input type="button" value="Reject Payment" ng-click="rejectPaymentDetails()" ng-disabled="!rejectPayment.$valid" class="btn btn-info" />
                    </div>*@
                </div>

                <div class="panel" ng-show="Hierarchy.HasAddress && Stakeholder.GAddress.length>0">

                    <div class="panel-heading">
                        Address Details
                    </div>
                    <div class="row-fluid">
                        @Html.Partial("ListViews/Address")
                    </div>
                    @*<div class="row-fluid" ng-show="isApprovedFirst && Stakeholder.IsAddressChange" ng-form="rejectAddress">
                        <div class="control-group">
                            <label class="control-label">
                                Rejection Reason
                            </label>
                            <input type="text" ng-model="RejectAddress" ng-required="Stakeholder.IsAddressChange" />
                        </div>
                    </div>
                    <div class="panel-footer" ng-show="isApprovedFirst && Stakeholder.IsAddressChange">
                        <input type="button" value="Approve Address" ng-click="approveAddress()" ng-disabled="!Stakeholder.IsAddressChange" class="btn btn-info" />
                        <input type="button" value="Reject Address" ng-click="rejectAddressDetails()" ng-disabled="!rejectAddress.$valid" class="btn btn-info" />
                    </div>*@
                </div>

                <div class="panel">
                    <div class="panel-heading">
                        Rejection Reason
                    </div>
                    <div class="row-fluid" ng-form="formReason">
                        <div class="control-group">
                            <label class="control-label"></label>
                            <div class="controls">
                                <textarea required ng-model="Description" rows="3" cols="150"></textarea>
                                <!-- <input type="text" required ng-model="Description"/>-->
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>

        <div class="modal-footer well">
            <!--row for save and cancel-->
            <div class="row-fluid">
                <div class="span1">
                    <input type="button" value="Approve" class="btn btn-success" data-ng-click="approve(Stakeholder)" />
                </div>
                <div class="span1">
                    <input type="button" value="Reject" ng-disabled="!formReason.$valid" class="btn btn-danger" data-ng-click="rejectSingle(Stakeholder)" />
                </div>
                <div class="span1">
                    <input type="button" value="Cancel" class="btn btn-success" data-ng-click="closeModel()" />
                </div>
            </div>
        </div>

    </div>


    <!--model for approve all stakeholder-->
    <div modal="showApproveAllModel" close="noToApproveAll()" options="modelOption">
        <div class="modal-header well-small2">
            Confirm to Approve
        </div>
        <div class="modal-body">
            Are you sure to Approve all stakeholders?
        </div>
        <div class="modal-footer well">
            <div class="row-fluid">
                <span class="left">
                    <input type="button" value="Yes" class="btn btn-success" ng-click="yesToApproveAll()" />
                    <input type="button" value="No" class="btn btn-info" ng-click="noToApproveAll()" />
                </span>
            </div>
        </div>
    </div>


</div>


@section scripts
{
    <script src="~/Areas/Stakeholder/ViewModels/ApproveStakeholder.js"></script>
}

@section styles
{
    <style>
        .new-model
        {
            width: 1026px;
            margin-left: -460px;
        }
    </style>
}